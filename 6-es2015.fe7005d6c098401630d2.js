(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Vb5T:function(t,e,a){"use strict";a.r(e),a.d(e,"StatsModule",(function(){return f}));var n=a("ofXK"),s=a("tyNb"),i=a("fXoL"),c=a("tk/3");let r=(()=>{class t{constructor(t){this.httpClient=t}calcTeamMapStats(t){let e=[];return new Promise((a,n)=>{t.forEach(t=>{console.log(t.nickname),this.httpClient.get(`players/${t.player_id}/stats/csgo`).subscribe(t=>{t.segments.forEach(t=>{e=this.enhanceMapPool(e,t)})})}),a(e)})}enhanceMapPool(e,a){const n=e.findIndex(t=>t.map===a.label);if(t.MAPPOOL.includes(a.label))if(-1===n)e.push({kdRatio:+a.stats["K/D Ratio"],matches:+a.stats.Matches,wins:+a.stats.Wins,avgKdRatio:+a.stats["K/D Ratio"]/+a.stats.Matches,winPercentage:+a.stats.Wins/+a.stats.Matches*100,map:a.label,mapImg:a.img_regular});else{const t=e[n];t.kdRatio+=+a.stats["K/D Ratio"],t.matches+=+a.stats.Matches,t.wins+=+a.stats.Wins,t.avgKdRatio=t.kdRatio/t.matches,t.winPercentage=t.wins/t.matches*100,t.map=a.label,t.mapImg=a.img_regular,e[n]=t}return this.sortMapStatsDetails(e)}sortMapStatsDetails(t){return t.sort((t,e)=>t.winPercentage>e.winPercentage?-1:e.winPercentage>t.winPercentage?1:0)}filterByMappool(e){return e.filter(e=>!!t.MAPPOOL.includes(e.map))}}return t.MAPPOOL=["de_inferno","de_cache","de_nuke","de_dust2","de_train","de_vertigo","de_mirage","de_overpass"],t.\u0275fac=function(e){return new(e||t)(i.Qb(c.b))},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o(t,e){if(1&t&&(i.Mb(0,"div",2),i.Kb(1,"img",3),i.Mb(2,"div",4),i.Mb(3,"p",5),i.fc(4),i.Lb(),i.Mb(5,"p",6),i.fc(6),i.Lb(),i.Lb(),i.Lb()),2&t){const t=e.$implicit,a=i.Wb(2);i.zb(1),i.Yb("src",t.mapImg,i.cc),i.zb(3),i.gc(t.map),i.zb(2),i.hc("",a.round(t.winPercentage),"% (",t.matches," matches)")}}function m(t,e){if(1&t&&(i.Mb(0,"div"),i.ec(1,o,7,4,"div",1),i.Lb()),2&t){const t=i.Wb();i.zb(1),i.Xb("ngForOf",t.mapStats)}}let p=(()=>{class t{constructor(){}ngOnInit(){}round(t){return Math.round(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-map-stats"]],inputs:{mapStats:"mapStats"},decls:1,vars:1,consts:[[4,"ngIf"],["class","map",4,"ngFor","ngForOf"],[1,"map"],[3,"src"],[1,"img-desc"],[1,"map-name"],[1,"map-stats"]],template:function(t,e){1&t&&i.ec(0,m,2,1,"div",0),2&t&&i.Xb("ngIf",e.mapStats)},directives:[n.i,n.h],styles:[".map[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem;position:relative;cursor:default}.map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:12rem;-webkit-filter:blur(4px);filter:blur(4px);-o-object-fit:cover;object-fit:cover}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;text-shadow:.2rem .2rem #1f1f1f;display:flex;align-items:center;justify-content:center;flex-direction:column}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]   .map-name[_ngcontent-%COMP%]{font-size:2.5rem}"]}),t})();const b=[{path:"",component:(()=>{class t{constructor(t,e,a,n){this.route=t,this.router=e,this.http=a,this.statsService=n,this.mapStatsTeam1=[],this.mapStatsTeam2=[]}ngOnInit(){this.route.params.forEach(t=>{const e=t.id;e&&this.http.get(`matches/${e}`).subscribe(t=>{const e=t;this.team1=e.teams.faction1.name,this.team2=e.teams.faction2.name,this.statsService.calcTeamMapStats(e.teams.faction1.roster).then(t=>{this.mapStatsTeam1=t}),this.statsService.calcTeamMapStats(e.teams.faction2.roster).then(t=>{this.mapStatsTeam2=t})})})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(s.a),i.Jb(s.b),i.Jb(c.b),i.Jb(r))},t.\u0275cmp=i.Db({type:t,selectors:[["app-stats"]],decls:9,vars:4,consts:[[1,"container"],[1,"team"],[3,"mapStats"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"h1"),i.fc(3),i.Lb(),i.Kb(4,"app-map-stats",2),i.Lb(),i.Mb(5,"div",1),i.Mb(6,"h1"),i.fc(7),i.Lb(),i.Kb(8,"app-map-stats",2),i.Lb(),i.Lb()),2&t&&(i.zb(3),i.gc(e.team1),i.zb(1),i.Xb("mapStats",e.mapStatsTeam1),i.zb(3),i.gc(e.team2),i.zb(1),i.Xb("mapStats",e.mapStatsTeam2))},directives:[p],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.container[_ngcontent-%COMP%]   .team[_ngcontent-%COMP%]{flex:1;margin:1rem;font-size:1.5rem}"]}),t})()}];let l=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},imports:[[s.c.forChild(b)],s.c]}),t})(),f=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},providers:[r],imports:[[n.b,l]]}),t})()}}]);