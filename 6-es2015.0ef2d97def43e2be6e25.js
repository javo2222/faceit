(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Vb5T:function(t,e,n){"use strict";n.r(e),n.d(e,"StatsModule",(function(){return M}));var a=n("ofXK"),s=n("tyNb"),i=n("fXoL"),r=n("tk/3");let c=(()=>{class t{constructor(t){this.httpClient=t}calcTeamMapStats(t){let e=[];return new Promise((n,a)=>{t.forEach(t=>{console.log(t.nickname),this.httpClient.get(`players/${t.player_id}/stats/csgo`).subscribe(t=>{t.segments.forEach(t=>{e=this.enhanceMapPool(e,t)})})}),n(e)})}enhanceMapPool(e,n){const a=e.findIndex(t=>t.map===n.label);if(t.MAPPOOL.includes(n.label))if(-1===a)e.push({kdRatio:+n.stats["K/D Ratio"],matches:+n.stats.Matches,wins:+n.stats.Wins,avgKdRatio:+n.stats["K/D Ratio"]/+n.stats.Matches,winPercentage:+n.stats.Wins/+n.stats.Matches*100,map:n.label,mapImg:n.img_regular});else{const t=e[a];t.kdRatio+=+n.stats["K/D Ratio"],t.matches+=+n.stats.Matches,t.wins+=+n.stats.Wins,t.avgKdRatio=t.kdRatio/t.matches,t.winPercentage=t.wins/t.matches*100,t.map=n.label,t.mapImg=n.img_regular,e[a]=t}return this.sortMapStatsDetails(e)}sortMapStatsDetails(t){return t.sort((t,e)=>t.winPercentage>e.winPercentage?-1:e.winPercentage>t.winPercentage?1:0)}filterByMappool(e){return e.filter(e=>!!t.MAPPOOL.includes(e.map))}}return t.MAPPOOL=["de_inferno","de_cache","de_nuke","de_dust2","de_train","de_vertigo","de_mirage","de_overpass"],t.\u0275fac=function(e){return new(e||t)(i.Qb(r.b))},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o(t,e){if(1&t&&(i.Mb(0,"div",2),i.Kb(1,"img",3),i.Mb(2,"div",4),i.Mb(3,"p",5),i.gc(4),i.Lb(),i.Mb(5,"p",6),i.gc(6),i.Lb(),i.Lb(),i.Lb()),2&t){const t=e.$implicit,n=i.Wb(2);i.zb(1),i.Yb("src",t.mapImg,i.dc),i.zb(3),i.hc(t.map),i.zb(2),i.ic("",n.round(t.winPercentage),"% (",t.matches," matches)")}}function l(t,e){if(1&t&&(i.Mb(0,"div"),i.fc(1,o,7,4,"div",1),i.Lb()),2&t){const t=i.Wb();i.zb(1),i.Xb("ngForOf",t.mapStats)}}let m=(()=>{class t{constructor(){}ngOnInit(){}round(t){return Math.round(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-map-stats"]],inputs:{mapStats:"mapStats"},decls:1,vars:1,consts:[[4,"ngIf"],["class","map",4,"ngFor","ngForOf"],[1,"map"],[3,"src"],[1,"img-desc"],[1,"map-name"],[1,"map-stats"]],template:function(t,e){1&t&&i.fc(0,l,2,1,"div",0),2&t&&i.Xb("ngIf",e.mapStats)},directives:[a.i,a.h],styles:[".map[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1.5rem;position:relative;cursor:default}.map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:12rem;-webkit-filter:blur(4px);filter:blur(4px);-o-object-fit:cover;object-fit:cover}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;text-shadow:.2rem .2rem #1f1f1f;display:flex;align-items:center;justify-content:center;flex-direction:column}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem}.map[_ngcontent-%COMP%]   .img-desc[_ngcontent-%COMP%]   .map-name[_ngcontent-%COMP%]{font-size:2.5rem}"]}),t})();function p(t,e){if(1&t&&(i.Mb(0,"div",4),i.Kb(1,"img",5),i.Mb(2,"span"),i.gc(3),i.Lb(),i.Lb()),2&t){const t=e.$implicit;i.zb(1),i.Zb("src","assets/level/faceit",t.game_skill_level,".png",i.dc),i.zb(2),i.hc(t.nickname)}}function g(t,e){if(1&t&&(i.Mb(0,"div",4),i.Kb(1,"img",5),i.Mb(2,"span"),i.gc(3,"Average"),i.Lb(),i.Lb()),2&t){const t=i.Wb();i.zb(1),i.Zb("src","assets/level/faceit",t.averageLevel,".png",i.dc)}}let b=(()=>{class t{constructor(){}ngOnInit(){this.averageLevel=this.calcAvgLevel()}calcAvgLevel(){let t=0,e=0;return console.log(this.team),this.team.roster.forEach(n=>{e++,t+=n.game_skill_level}),console.log(t),Math.round(t/e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-roster"]],inputs:{team:"team"},decls:5,vars:3,consts:[[1,"roster-name"],[1,"players"],["class","player",4,"ngFor","ngForOf"],["class","player",4,"ngIf"],[1,"player"],[3,"src"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.gc(1),i.Lb(),i.Mb(2,"div",1),i.fc(3,p,4,2,"div",2),i.fc(4,g,4,1,"div",3),i.Lb()),2&t&&(i.zb(1),i.hc(null==e.team?null:e.team.name),i.zb(2),i.Xb("ngForOf",null==e.team?null:e.team.roster),i.zb(1),i.Xb("ngIf",e.averageLevel))},directives:[a.h,a.i],styles:["[_nghost-%COMP%]{margin-bottom:1.5rem}.roster-name[_ngcontent-%COMP%]{display:block;font-size:1.8rem;font-weight:700;padding:1rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:100%}.players[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;flex-direction:column}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{width:100%;font-size:1.5rem;display:flex;align-items:center;padding:.5rem 1rem}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;margin-right:.5rem}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]:last-child{border-top:.1rem solid #525252}"]}),t})();function d(t,e){if(1&t&&i.Kb(0,"app-roster",5),2&t){const t=i.Wb();i.Xb("team",t.team1)}}function f(t,e){if(1&t&&i.Kb(0,"app-roster",5),2&t){const t=i.Wb();i.Xb("team",t.team2)}}const h=[{path:"",component:(()=>{class t{constructor(t,e,n,a){this.route=t,this.router=e,this.http=n,this.statsService=a,this.mapStatsTeam1=[],this.mapStatsTeam2=[]}ngOnInit(){this.route.params.forEach(t=>{const e=t.id;e&&this.http.get(`matches/${e}`).subscribe(t=>{const e=t;this.team1=e.teams.faction1,this.team2=e.teams.faction2,this.statsService.calcTeamMapStats(e.teams.faction1.roster).then(t=>{this.mapStatsTeam1=t}),this.statsService.calcTeamMapStats(e.teams.faction2.roster).then(t=>{this.mapStatsTeam2=t})})})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(s.a),i.Jb(s.b),i.Jb(r.b),i.Jb(c))},t.\u0275cmp=i.Db({type:t,selectors:[["app-stats"]],decls:8,vars:4,consts:[[1,"team"],[3,"team",4,"ngIf"],[1,"container"],[1,"team-stats"],[3,"mapStats"],[3,"team"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.fc(1,d,1,1,"app-roster",1),i.fc(2,f,1,1,"app-roster",1),i.Lb(),i.Mb(3,"div",2),i.Mb(4,"div",3),i.Kb(5,"app-map-stats",4),i.Lb(),i.Mb(6,"div",3),i.Kb(7,"app-map-stats",4),i.Lb(),i.Lb()),2&t&&(i.zb(1),i.Xb("ngIf",e.team1),i.zb(1),i.Xb("ngIf",e.team2),i.zb(3),i.Xb("mapStats",e.mapStatsTeam1),i.zb(2),i.Xb("mapStats",e.mapStatsTeam2))},directives:[a.i,m,b],styles:[".team[_ngcontent-%COMP%]{display:block;width:100%}.team[_ngcontent-%COMP%]   app-roster[_ngcontent-%COMP%]{display:inline-block;width:50%}.container[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]   .team-stats[_ngcontent-%COMP%]{position:relative;flex:1 1 50%;padding:1rem;font-size:1.5rem}"]}),t})()}];let u=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},imports:[[s.c.forChild(h)],s.c]}),t})(),M=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},providers:[c],imports:[[a.b,u]]}),t})()}}]);